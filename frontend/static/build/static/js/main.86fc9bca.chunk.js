(this.webpackJsonpstatic=this.webpackJsonpstatic||[]).push([[0],{169:function(e,t,a){e.exports=a(394)},174:function(e,t,a){},391:function(e,t,a){},392:function(e){e.exports=JSON.parse('[{"featureType":"administrative","elementType":"labels.text.fill","stylers":[{"color":"#444444"}]},{"featureType":"landscape","elementType":"all","stylers":[{"lightness":"0"},{"weight":"0.01"}]},{"featureType":"landscape.man_made","elementType":"all","stylers":[{"saturation":"0"}]},{"featureType":"landscape.natural","elementType":"all","stylers":[{"lightness":"0"}]},{"featureType":"poi","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"road","elementType":"all","stylers":[{"saturation":-100},{"lightness":45},{"visibility":"simplified"}]},{"featureType":"road","elementType":"geometry","stylers":[{"color":"#d2d2d2"},{"weight":"1.00"}]},{"featureType":"road","elementType":"labels","stylers":[{"lightness":"0"},{"weight":"3.00"}]},{"featureType":"road","elementType":"labels.text","stylers":[{"color":"#0f2739"},{"weight":"2.00"}]},{"featureType":"road","elementType":"labels.text.stroke","stylers":[{"color":"#ffffff"}]},{"featureType":"road.highway","elementType":"all","stylers":[{"visibility":"simplified"}]},{"featureType":"road.arterial","elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"road.local","elementType":"all","stylers":[{"visibility":"simplified"},{"weight":"2.00"}]},{"featureType":"transit","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"water","elementType":"all","stylers":[{"color":"#6aa5b1"},{"visibility":"on"}]}]')},393:function(e,t,a){},394:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(69),o=a.n(l),s=(a(174),a(34)),i=a(4),c=a(5),u=a(7),m=a(6),h=a(14),p=a(8),d=a(2),f=a.n(d);f.a.defaults.xsrfCookieName="csrftoken",f.a.defaults.xsrfHeaderName="X-CSRFToken";var g=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={username:"",email:"",password:""},a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.handleChange=a.handleChange.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),f.a.post("/api/v1/rest-auth/login/",this.state).then((function(e){localStorage.setItem("my-app-user",JSON.stringify(e.data)),console.log("local storage",localStorage),t.props.history.push("/profile/")})).catch((function(e){console.log(e)}))}},{key:"handleChange",value:function(e){this.setState(Object(s.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("p",null,r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{id:"username",type:"text",name:"username",value:this.state.username,onChange:this.handleChange,placeholder:"Enter username",required:!0})),r.a.createElement("p",null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{id:"email",type:"email",name:"email",value:this.state.email,onChange:this.handleChange,placeholder:"Enter email",required:!0})),r.a.createElement("p",null,r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{id:"password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange,placeholder:"Enter password",required:!0})),r.a.createElement("button",null,"Login"),r.a.createElement("a",{href:"/"},"Back"))}}]),t}(n.Component);f.a.defaults.xsrfCookieName="csrftoken",f.a.defaults.xsrfHeaderName="X-CSRFToken";var b=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={username:"",email:"",password1:"",password2:""},a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.handleChange=a.handleChange.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),f.a.post("/api/v1/rest-auth/registration/",this.state).then((function(e){localStorage.setItem("my-app-user",JSON.stringify(e.data)),t.props.history.push("/profile/create/")})).catch((function(e){console.log(e)}))}},{key:"handleChange",value:function(e){this.setState(Object(s.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("p",null,r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{id:"username",type:"text",name:"username",value:this.state.username,onChange:this.handleChange,placeholder:"Enter username",required:!0})),r.a.createElement("p",null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{id:"email",type:"email",name:"email",value:this.state.email,onChange:this.handleChange,placeholder:"Enter email",required:!0})),r.a.createElement("p",null,r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{id:"password",type:"password",name:"password1",value:this.state.password,onChange:this.handleChange,placeholder:"Enter password",required:!0})),r.a.createElement("p",null,r.a.createElement("label",{htmlFor:"password"},"Password 2"),r.a.createElement("input",{id:"password2",type:"password",name:"password2",value:this.state.password2,onChange:this.handleChange,placeholder:"Enter password again",required:!0})),r.a.createElement("button",null,"Sign Up"),r.a.createElement("a",{href:"/"},"Back"))}}]),t}(n.Component),v=a(168);f.a.defaults.xsrfCookieName="csrftoken",f.a.defaults.xsrfHeaderName="X-CSRFToken";var y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={name:"",avatar:null,preview:"",profile:[],created_by:""},a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.handleAvatarChange=a.handleAvatarChange.bind(Object(h.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){console.log(e.target.checked),this.setState(Object(s.a)({},e.target.name,e.target.value))}},{key:"handleCheckboxChange",value:function(e){this.setState(Object(s.a)({},e.target.name,e.target.checked))}},{key:"handleAvatarChange",value:function(e){var t=this,a=e.target.files[0];this.setState({avatar:a});var n=new FileReader;n.onloadend=function(){t.setState({preview:n.result})},n.readAsDataURL(a)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=new FormData;a.append("name",this.state.name),a.append("avatar",this.state.avatar),f.a.post("/api/v1/profile/create/",a,{headers:{"content-type":"multipart/form-data"}}).then((function(e){var a=Object(v.a)(t.state.profile);t.setState({profile:a,name:"",preview:null,image:null,created_by:"",is_active:!0}),t.props.history.push("/profile/")})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this;f.a.get("/api/v1/profile/create/").then((function(t){console.log(t),e.setState({profile:t.data})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return console.log(this.state),r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"aside-content"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("p",null,"Create Your Profile"),r.a.createElement("p",null,"Enter Your Name"),r.a.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:this.handleChange}),r.a.createElement("p",null,"Add a picture!"),this.state.avatar?r.a.createElement("img",{src:this.state.preview,alt:"preview"}):r.a.createElement("input",{type:"file",name:"avatar",onChange:this.handleAvatarChange}),r.a.createElement("button",null,"Save"))))}}]),t}(n.Component),E=a(30);f.a.defaults.xsrfCookieName="csrftoken",f.a.defaults.xsrfHeaderName="X-CSRFToken",f.a.defaults.headers.common.Authorization=localStorage.getItem("my-app-user")?"Token ".concat(JSON.parse(localStorage.getItem("my-app-user")).token):null;var O=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).logout=function(){f.a.post("/api/v1/rest-auth/logout/"),localStorage.clear("token"),a.setState({navigate:!0})},a.deactivate=function(){f.a.patch("/api/v1/profile/".concat(a.state.profile.id,"/"),{is_active:!1}),a.setState({is_active:!1}),a.props.history.push("/")},a.state={profile:{},is_active:"",navigate:!1},a.deactivate=a.deactivate.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;f.a.get("/api/v1/profile/detail/",{headers:{Authorization:"Token ".concat(JSON.parse(localStorage.getItem("my-app-user")).token)}}).then((function(t){e.setState({profile:t.data[0]})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return this.state.navigate?r.a.createElement(E.a,{to:"/",push:!0}):r.a.createElement("section",{className:"aside-content"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h1",null,this.state.profile.name),r.a.createElement("img",{src:this.state.profile.avatar,alt:""}),r.a.createElement("p",null,"Prefences Place Holder"),r.a.createElement("button",null,"Save")),r.a.createElement("a",{href:"/"},"Back"),r.a.createElement("button",{onClick:this.deactivate},"Deactivate Account"),r.a.createElement("button",{onClick:this.logout},"Log Out"))}}]),t}(n.Component),S=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={newrestaurant:[]},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(e){this.setState({newrestaurant:this.props.restaurant}),console.log(this.props.restaurant)}},{key:"render",value:function(e,t){return r.a.createElement("div",null,r.a.createElement("h2",null,this.props.restaurant.restaurant.name),r.a.createElement("p",null,this.props.restaurant.restaurant.cuisines),r.a.createElement("p",null,this.props.restaurant.restaurant.timings))}}]),t}(n.Component),k=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null)}}]),t}(n.Component),j=a(44),C=(a(391),n.Component,a(392)),w=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={restaurantLocation:{lat:32,lng:32},userLocation:{lat:32,lng:32},loading:!0},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(e){var t=this;navigator.geolocation.getCurrentPosition((function(e){var a=e.coords,n=a.latitude,r=a.longitude;t.setState({userLocation:{lat:n,lng:r},loading:!1}),console.log(t.state.userLocation)}),(function(){t.setState({loading:!1})}))}},{key:"render",value:function(){console.log("map props",this.state.restaurantLocation,this.state.userLocation);var e=this.state,t=e.loading,a=e.userLocation,n=e.restaurantLocation;return t?null:r.a.createElement(j.GoogleMap,{defaultZoom:15,defaultCenter:a,defaultOptions:{disableDefaultUI:!0,draggable:!0,keyboardShortcuts:!1,scaleControl:!0,scrollwheel:!0,styles:C}},r.a.createElement(j.Marker,{position:a}),r.a.createElement(j.Marker,{position:n}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{restaurantLocation:{lat:e.restaurantLocation.lat,lng:e.restaurantLocation.lng}}}}]),t}(n.Component),T=Object(j.withScriptjs)(Object(j.withGoogleMap)(w));function L(e){return console.log("wrapped map",e),r.a.createElement("div",{className:"map"},r.a.createElement(T,{googleMapURL:"https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places&key=AIzaSyBm5r5sZESK6Jo8pWiLFjkGvpGJ010ED9I",loadingElement:r.a.createElement("div",{style:{height:"100% "}}),containerElement:r.a.createElement("div",{style:{height:"100% "}}),mapElement:r.a.createElement("div",{style:{height:"100% "}}),restaurantLocation:e.restaurantLocation}))}a(393);var x=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={restaurantLocation:{lat:null,lng:null},userLocation:{lat:null,lng:null},restaurantIndex:"",restaurant:[],restaurantSelected:!1,navigate:!1},a.randomGenerator=a.randomGenerator.bind(Object(h.a)(a)),a.getRandomInt=a.getRandomInt.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(e){var t=this;navigator.geolocation.getCurrentPosition((function(e){var a=e.coords,n=a.latitude,r=a.longitude;t.setState({userLocation:{lat:n,lng:r},loading:!1})}),(function(){t.setState({loading:!1})}))}},{key:"getRandomInt",value:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}},{key:"randomGenerator",value:function(e,t){var a=this;f.a.get("https://developers.zomato.com/api/v2.1/search?lat=".concat(this.state.userLocation.lat,"&lon=").concat(this.state.userLocation.lng,"&radius=8000&apikey=5ff1c6015f3549f838e7d3a54deb7e8f")).then((function(e){a.setState({restaurant:e.data.restaurants[Object.keys(e.data.restaurants)[a.getRandomInt(0,21)]]}),a.setState({restaurantLocation:{lat:Number(a.state.restaurant.restaurant.location.latitude),lng:Number(a.state.restaurant.restaurant.location.longitude)}}),a.setState({restaurantSelected:!0}),console.log(a.state.restaurant)})).catch((function(e){console.log(e)})),console.log("randomGenerate is firing")}},{key:"render",value:function(){var e;return e=!1===this.state.restaurantSelected?null:r.a.createElement(S,{restaurant:this.state.restaurant}),r.a.createElement("div",{className:"row"},r.a.createElement(L,{restaurantLocation:this.state.restaurantLocation}),r.a.createElement("aside",null,r.a.createElement("h1",null,"Shut Up & Eat"),r.a.createElement("a",{href:"/login/"},"Sign In"),r.a.createElement("a",{href:"/signup/"},"Sign up"),r.a.createElement("a",{href:"/profile/"},"Profile"),this.props.children,r.a.createElement("button",{type:"button",onClick:this.randomGenerator},"Random Generator"),e))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var N=a(96);o.a.render(r.a.createElement(N.a,null,r.a.createElement(x,null,r.a.createElement(E.d,null,r.a.createElement(E.b,{path:"/restaurant/",component:S}),r.a.createElement(E.b,{path:"/profile/create/",component:y}),r.a.createElement(E.b,{path:"/profile/",component:O}),r.a.createElement(E.b,{path:"/login/",component:g}),r.a.createElement(E.b,{path:"/signup/",component:b}),r.a.createElement(E.b,{exact:!0,path:"/",component:k}))),r.a.createElement("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css",integrity:"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T",crossOrigin:"anonymous"})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[169,1,2]]]);
//# sourceMappingURL=main.86fc9bca.chunk.js.map